<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shop All</title>
  <link rel="stylesheet" href="../styles/ShopAll.css" />
  <link rel="stylesheet" href="../styles/style.css" />
</head>
<body>

  <header>
    <nav class="auth-nav">
      <a href="/login" class="auth-link">Login</a>
      <a href="/admin/products" class="auth-link">Admin</a>
    </nav>
  </header>

  <section id="wrapper_overlay">
    <div id="wrapper_background"></div>
  </section>

  <main>
    <h1 style="width: 100%; text-align: center; font-size: 5em;" id="title">Shop All</h1>


    <section id="products_container">

      <template>
        <div class="product_card" data-name="Game Headset" data-price="59.99">
          <img class="product_image" src="Assets/gameHeadset.png" />
          <h3 class="product_name"></h3>
          <span class="product_price"></span>
          <button class="view_product">View Product</button>
          <button class="add_to_basket">Add to Basket</button>
        </div>
      </template>

    </section>
  </main>

  <section id="filter">
    <div id="filter_content">
      <a href="../pages/ShopAll.html">
        <button>All</button>
      </a>

      <a href="../pages/ShopAll.html?category=Games">
        <button>Games</button>
      </a>

      <a href="../pages/ShopAll.html?category=Consoles%20and%20PCs">
        <button>Consoles and PCs</button>
      </a>

      <a href="../pages/ShopAll.html?category=Accessories">
        <button>Accessories</button>
      </a>

      <a href="../pages/ShopAll.html?category=Hardware">
        <button>Hardware</button>
      </a>
    </div>

    <h1>
      Filter
      <svg onclick="openPanel('filter')" id="toggle_up" width="30" height="30" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8">
        <path fill="#000000" d="m2 5l2-2l2 2l1-1l-3-3l-3 3"/>
      </svg>

      <svg onclick="openPanel('filter')" id="toggle_down" width="30" height="30" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8">
        <path fill="#000000" d="m2 3l2 2l2-2l1 1l-3 3l-3-3"/>
      </svg>
    </h1>
  </section>


  <script src="../scripts/header.js"></script>
  <script src="../scripts/animations.js" defer></script>
  <script src="../scripts/products.js?v=4"></script>
<script>
(function () {
  const query = (localStorage.getItem("veltrix_search_query") || "").trim().toLowerCase();
  if (!query) return;

  function applyFilter() {
    const cards = document.querySelectorAll(".product_card");
    if (!cards.length) return false;

    let shown = 0;
    cards.forEach(card => {
      const name = (card.dataset.name || "").toLowerCase();
      const match = name.includes(query);
      card.style.display = match ? "" : "none";
      if (match) shown++;
    });

    const title = document.getElementById("title");
    if (title) title.textContent = `Results for "${query}" (${shown})`;

    return true;
  }

  // Try now
  if (applyFilter()) return;

  // If products.js injects cards later, watch for it
  const container = document.getElementById("products_container");
  if (!container) return;

  const observer = new MutationObserver(() => {
    if (applyFilter()) observer.disconnect();
  });

  observer.observe(container, { childList: true, subtree: true });
})();
</script>




</body>
</html>
